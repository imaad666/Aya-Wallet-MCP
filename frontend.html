<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aya Wallet MCP - DeFi Tools</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 30px;
        }

        .tool-section {
            margin-bottom: 30px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            padding: 20px;
            background: #fafafa;
        }

        .tool-section h3 {
            color: #333;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }

        .form-group input, .form-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: transform 0.2s;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            background: #f8f9fa;
            border-left: 4px solid #667eea;
        }

        .result.success {
            background: #d4edda;
            border-left-color: #28a745;
        }

        .result.error {
            background: #f8d7da;
            border-left-color: #dc3545;
        }

        .result pre {
            white-space: pre-wrap;
            word-wrap: break-word;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }

        .status {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 10px 20px;
            border-radius: 25px;
            color: white;
            font-weight: 600;
            z-index: 1000;
        }

        .status.connected {
            background: #28a745;
        }

        .status.disconnected {
            background: #dc3545;
        }

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #e0e0e0;
        }

        .tab {
            padding: 15px 25px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s;
        }

        .tab.active {
            border-bottom-color: #667eea;
            color: #667eea;
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="status disconnected" id="status">Disconnected</div>
    
    <div class="container">
        <div class="header">
            <h1>🚀 Aya Wallet MCP</h1>
            <p>Hedera DeFi Tools & SaucerSwap Integration</p>
        </div>

        <div class="content">
            <div class="tabs">
                <div class="tab active" onclick="showTab('hedera')">Hedera DeFi</div>
                <div class="tab" onclick="showTab('saucerswap')">SaucerSwap</div>
                <div class="tab" onclick="showTab('hts')">HTS Tokens</div>
                <div class="tab" onclick="showTab('defi')">DeFi Aggregator</div>
            </div>

            <!-- Hedera DeFi Tools -->
            <div class="tab-content active" id="hedera">
                <div class="tool-section">
                    <h3>💰 Get HBAR Balance</h3>
                    <div class="form-group">
                        <label>Account ID:</label>
                        <input type="text" id="balanceAccountId" placeholder="0.0.123456" value="0.0.123456">
                    </div>
                    <button class="btn" onclick="getBalance()">Get Balance</button>
                    <div id="balanceResult" class="result" style="display: none;"></div>
                </div>

                <div class="tool-section">
                    <h3>💸 Transfer HBAR</h3>
                    <div class="form-group">
                        <label>From Account ID:</label>
                        <input type="text" id="fromAccountId" placeholder="0.0.123456" value="0.0.123456">
                    </div>
                    <div class="form-group">
                        <label>To Account ID:</label>
                        <input type="text" id="toAccountId" placeholder="0.0.789012" value="0.0.789012">
                    </div>
                    <div class="form-group">
                        <label>Amount (HBAR):</label>
                        <input type="text" id="transferAmount" placeholder="10.0" value="10.0">
                    </div>
                    <div class="form-group">
                        <label>Memo (optional):</label>
                        <input type="text" id="transferMemo" placeholder="Test transfer">
                    </div>
                    <button class="btn" onclick="transferHBAR()">Transfer HBAR</button>
                    <div id="transferResult" class="result" style="display: none;"></div>
                </div>
            </div>

            <!-- SaucerSwap Tools -->
            <div class="tab-content" id="saucerswap">
                <div class="tool-section">
                    <h3>💱 Get Swap Quote</h3>
                    <div class="form-group">
                        <label>Token In:</label>
                        <input type="text" id="quoteTokenIn" placeholder="0x0000000000000000000000000000000000000000" value="0x0000000000000000000000000000000000000000">
                    </div>
                    <div class="form-group">
                        <label>Token Out:</label>
                        <input type="text" id="quoteTokenOut" placeholder="0x0000000000000000000000000000000000000001" value="0x0000000000000000000000000000000000000001">
                    </div>
                    <div class="form-group">
                        <label>Amount:</label>
                        <input type="text" id="quoteAmount" placeholder="10.0" value="10.0">
                    </div>
                    <div class="form-group">
                        <label>Slippage Tolerance (%):</label>
                        <input type="number" id="quoteSlippage" placeholder="0.5" value="0.5" step="0.1">
                    </div>
                    <button class="btn" onclick="getQuote()">Get Quote</button>
                    <div id="quoteResult" class="result" style="display: none;"></div>
                </div>

                <div class="tool-section">
                    <h3>🔄 Execute Swap</h3>
                    <div class="form-group">
                        <label>Token In:</label>
                        <input type="text" id="swapTokenIn" placeholder="0x0000000000000000000000000000000000000000" value="0x0000000000000000000000000000000000000000">
                    </div>
                    <div class="form-group">
                        <label>Token Out:</label>
                        <input type="text" id="swapTokenOut" placeholder="0x0000000000000000000000000000000000000001" value="0x0000000000000000000000000000000000000001">
                    </div>
                    <div class="form-group">
                        <label>Amount:</label>
                        <input type="text" id="swapAmount" placeholder="10.0" value="10.0">
                    </div>
                    <div class="form-group">
                        <label>Recipient:</label>
                        <input type="text" id="swapRecipient" placeholder="0.0.123456" value="0.0.123456">
                    </div>
                    <div class="form-group">
                        <label>Slippage Tolerance (%):</label>
                        <input type="number" id="swapSlippage" placeholder="0.5" value="0.5" step="0.1">
                    </div>
                    <button class="btn" onclick="executeSwap()">Execute Swap</button>
                    <div id="swapResult" class="result" style="display: none;"></div>
                </div>
            </div>

            <!-- HTS Tools -->
            <div class="tab-content" id="hts">
                <div class="tool-section">
                    <h3>🪙 Create Token</h3>
                    <div class="form-group">
                        <label>Token Name:</label>
                        <input type="text" id="tokenName" placeholder="My Token" value="My Token">
                    </div>
                    <div class="form-group">
                        <label>Token Symbol:</label>
                        <input type="text" id="tokenSymbol" placeholder="MTK" value="MTK">
                    </div>
                    <div class="form-group">
                        <label>Decimals:</label>
                        <input type="number" id="tokenDecimals" placeholder="8" value="8">
                    </div>
                    <div class="form-group">
                        <label>Initial Supply:</label>
                        <input type="text" id="tokenInitialSupply" placeholder="1000000" value="1000000">
                    </div>
                    <div class="form-group">
                        <label>Treasury Account:</label>
                        <input type="text" id="tokenTreasury" placeholder="0.0.123456" value="0.0.123456">
                    </div>
                    <button class="btn" onclick="createToken()">Create Token</button>
                    <div id="createTokenResult" class="result" style="display: none;"></div>
                </div>

                <div class="tool-section">
                    <h3>🪙 Mint Token</h3>
                    <div class="form-group">
                        <label>Token ID:</label>
                        <input type="text" id="mintTokenId" placeholder="0.0.123456" value="0.0.123456">
                    </div>
                    <div class="form-group">
                        <label>Amount:</label>
                        <input type="text" id="mintAmount" placeholder="1000" value="1000">
                    </div>
                    <div class="form-group">
                        <label>Recipient:</label>
                        <input type="text" id="mintRecipient" placeholder="0.0.789012" value="0.0.789012">
                    </div>
                    <button class="btn" onclick="mintToken()">Mint Token</button>
                    <div id="mintTokenResult" class="result" style="display: none;"></div>
                </div>
            </div>

            <!-- DeFi Aggregator -->
            <div class="tab-content" id="defi">
                <div class="tool-section">
                    <h3>🔍 Find Best Rate</h3>
                    <div class="form-group">
                        <label>Token In:</label>
                        <input type="text" id="bestRateTokenIn" placeholder="0x0000000000000000000000000000000000000000" value="0x0000000000000000000000000000000000000000">
                    </div>
                    <div class="form-group">
                        <label>Token Out:</label>
                        <input type="text" id="bestRateTokenOut" placeholder="0x0000000000000000000000000000000000000001" value="0x0000000000000000000000000000000000000001">
                    </div>
                    <div class="form-group">
                        <label>Amount:</label>
                        <input type="text" id="bestRateAmount" placeholder="10.0" value="10.0">
                    </div>
                    <button class="btn" onclick="findBestRate()">Find Best Rate</button>
                    <div id="bestRateResult" class="result" style="display: none;"></div>
                </div>

                <div class="tool-section">
                    <h3>📊 Optimize Portfolio</h3>
                    <div class="form-group">
                        <label>Wallet Address:</label>
                        <input type="text" id="portfolioWallet" placeholder="0.0.123456" value="0.0.123456">
                    </div>
                    <div class="form-group">
                        <label>Risk Tolerance:</label>
                        <select id="portfolioRisk">
                            <option value="low">Low</option>
                            <option value="medium" selected>Medium</option>
                            <option value="high">High</option>
                        </select>
                    </div>
                    <button class="btn" onclick="optimizePortfolio()">Optimize Portfolio</button>
                    <div id="portfolioResult" class="result" style="display: none;"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let mcpServer = null;
        let requestId = 1;

        // Initialize MCP connection
        async function initMCP() {
            try {
                // For demo purposes, we'll simulate MCP responses
                document.getElementById('status').textContent = 'Connected (Demo Mode)';
                document.getElementById('status').className = 'status connected';
                console.log('MCP Server connected in demo mode');
            } catch (error) {
                console.error('Failed to connect to MCP server:', error);
                document.getElementById('status').textContent = 'Disconnected';
                document.getElementById('status').className = 'status disconnected';
            }
        }

        // Simulate MCP tool calls
        async function callTool(name, arguments) {
            // Simulate network delay
            await new Promise(resolve => setTimeout(resolve, 500));
            
            // Mock responses based on tool name
            const mockResponses = {
                'hedera_get_balance': {
                    success: true,
                    data: {
                        accountId: arguments.accountId,
                        balance: '1250.75',
                        currency: 'HBAR',
                        timestamp: new Date().toISOString()
                    }
                },
                'hedera_transfer_hbar': {
                    success: true,
                    data: {
                        transactionId: '0.0.123456@' + Date.now(),
                        fromAccount: arguments.fromAccountId,
                        toAccount: arguments.toAccountId,
                        amount: arguments.amount,
                        fee: '0.0001',
                        status: 'SUCCESS'
                    }
                },
                'saucerswap_get_quote': {
                    success: true,
                    data: {
                        tokenIn: arguments.tokenIn,
                        tokenOut: arguments.tokenOut,
                        amountIn: arguments.amount,
                        amountOut: '9.85',
                        priceImpact: '0.15%',
                        gasEstimate: '150000',
                        route: ['SaucerSwap', 'Direct']
                    }
                },
                'saucerswap_execute_swap': {
                    success: true,
                    data: {
                        transactionHash: '0x' + Math.random().toString(16).substr(2, 64),
                        tokenIn: arguments.tokenIn,
                        tokenOut: arguments.tokenOut,
                        amountIn: arguments.amount,
                        amountOut: '9.85',
                        gasUsed: '145000',
                        status: 'SUCCESS'
                    }
                },
                'hts_create_token': {
                    success: true,
                    data: {
                        tokenId: '0.0.' + Math.floor(Math.random() * 1000000),
                        name: arguments.name,
                        symbol: arguments.symbol,
                        decimals: arguments.decimals,
                        totalSupply: arguments.initialSupply,
                        treasury: arguments.treasury,
                        status: 'SUCCESS'
                    }
                },
                'hts_mint_token': {
                    success: true,
                    data: {
                        tokenId: arguments.tokenId,
                        amount: arguments.amount,
                        recipient: arguments.recipient,
                        transactionId: '0.0.123456@' + Date.now(),
                        status: 'SUCCESS'
                    }
                },
                'defi_find_best_rate': {
                    success: true,
                    data: {
                        tokenIn: arguments.tokenIn,
                        tokenOut: arguments.tokenOut,
                        amount: arguments.amount,
                        bestRate: '0.985',
                        bestDEX: 'SaucerSwap',
                        alternatives: [
                            { dex: 'HeliSwap', rate: '0.982' },
                            { dex: 'Pangolin', rate: '0.980' }
                        ],
                        gasEstimate: '150000'
                    }
                },
                'defi_optimize_portfolio': {
                    success: true,
                    data: {
                        walletAddress: arguments.walletAddress,
                        riskTolerance: arguments.riskTolerance,
                        recommendations: [
                            { action: 'SWAP', token: 'HBAR', amount: '500', target: 'USDC' },
                            { action: 'STAKE', protocol: 'SaucerSwap', amount: '300' },
                            { action: 'PROVIDE_LIQUIDITY', pair: 'HBAR/USDC', amount: '200' }
                        ],
                        expectedAPY: '12.5%',
                        riskScore: 'Medium'
                    }
                }
            };

            return mockResponses[name] || { success: false, error: 'Unknown tool' };
        }

        // Tool functions
        async function getBalance() {
            const accountId = document.getElementById('balanceAccountId').value;
            const result = await callTool('hedera_get_balance', { accountId });
            showResult('balanceResult', result);
        }

        async function transferHBAR() {
            const fromAccountId = document.getElementById('fromAccountId').value;
            const toAccountId = document.getElementById('toAccountId').value;
            const amount = document.getElementById('transferAmount').value;
            const memo = document.getElementById('transferMemo').value;
            
            const result = await callTool('hedera_transfer_hbar', { 
                fromAccountId, toAccountId, amount, memo 
            });
            showResult('transferResult', result);
        }

        async function getQuote() {
            const tokenIn = document.getElementById('quoteTokenIn').value;
            const tokenOut = document.getElementById('quoteTokenOut').value;
            const amount = document.getElementById('quoteAmount').value;
            const slippageTolerance = document.getElementById('quoteSlippage').value;
            
            const result = await callTool('saucerswap_get_quote', { 
                tokenIn, tokenOut, amount, slippageTolerance 
            });
            showResult('quoteResult', result);
        }

        async function executeSwap() {
            const tokenIn = document.getElementById('swapTokenIn').value;
            const tokenOut = document.getElementById('swapTokenOut').value;
            const amount = document.getElementById('swapAmount').value;
            const recipient = document.getElementById('swapRecipient').value;
            const slippageTolerance = document.getElementById('swapSlippage').value;
            
            const result = await callTool('saucerswap_execute_swap', { 
                tokenIn, tokenOut, amount, recipient, slippageTolerance 
            });
            showResult('swapResult', result);
        }

        async function createToken() {
            const name = document.getElementById('tokenName').value;
            const symbol = document.getElementById('tokenSymbol').value;
            const decimals = document.getElementById('tokenDecimals').value;
            const initialSupply = document.getElementById('tokenInitialSupply').value;
            const treasury = document.getElementById('tokenTreasury').value;
            
            const result = await callTool('hts_create_token', { 
                name, symbol, decimals, initialSupply, treasury 
            });
            showResult('createTokenResult', result);
        }

        async function mintToken() {
            const tokenId = document.getElementById('mintTokenId').value;
            const amount = document.getElementById('mintAmount').value;
            const recipient = document.getElementById('mintRecipient').value;
            
            const result = await callTool('hts_mint_token', { 
                tokenId, amount, recipient 
            });
            showResult('mintTokenResult', result);
        }

        async function findBestRate() {
            const tokenIn = document.getElementById('bestRateTokenIn').value;
            const tokenOut = document.getElementById('bestRateTokenOut').value;
            const amount = document.getElementById('bestRateAmount').value;
            
            const result = await callTool('defi_find_best_rate', { 
                tokenIn, tokenOut, amount 
            });
            showResult('bestRateResult', result);
        }

        async function optimizePortfolio() {
            const walletAddress = document.getElementById('portfolioWallet').value;
            const riskTolerance = document.getElementById('portfolioRisk').value;
            
            const result = await callTool('defi_optimize_portfolio', { 
                walletAddress, riskTolerance 
            });
            showResult('portfolioResult', result);
        }

        function showResult(elementId, result) {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            
            if (result.success) {
                element.className = 'result success';
                element.innerHTML = `
                    <h4>✅ Success</h4>
                    <pre>${JSON.stringify(result.data, null, 2)}</pre>
                `;
            } else {
                element.className = 'result error';
                element.innerHTML = `
                    <h4>❌ Error</h4>
                    <pre>${JSON.stringify(result.error, null, 2)}</pre>
                `;
            }
        }

        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            event.target.classList.add('active');
        }

        // Initialize when page loads
        window.onload = function() {
            initMCP();
        };
    </script>
</body>
</html> 